<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let isTablet = /iPad|Android(?!.*Mobile)|Tablet|PlayBook|Silk/i.test(navigator.userAgent);
            
            if (!isTablet) {
                // PC에서만 meta 태그 추가
                let metaTag = document.createElement("meta");
                metaTag.name = "viewport";
                metaTag.content = "width=device-width, initial-scale=1.0";
                document.head.appendChild(metaTag);
            } else {
                // 태블릿에서는 html 태그를 변경
                document.documentElement.setAttribute("data-device", "tablet");
            }
        });
    </script>
    <!-- <meta name="viewport" content="width=1280, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"> -->
    <title>국민은행 상시감사시스템</title>
    <link rel="stylesheet" href="./plugins/jstree/3.3.17/themes/default/style.min.css">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/layout.css">
    <script src="./plugins/jqeury/3.6.0/jquery.min.js"></script>
    <script src="./plugins/jstree/3.3.17/jstree.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="tit-area">
            <h1><span class="blind">국민은행 </span>상시감사시스템</h1>
        </div>
        <header>
            <nav>
                <ul class="gnb-menu">
                    <li class="menu-item">
                        <a href="#" class="active">상시감사</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="active">상시점검</a></li>
                            <li><a href="#">거래내역</a></li>
                            <li><a href="#">점검결과현황</a></li>
                            <li><a href="#">점검지원</a></li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <a href="#">모니터링</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="active">상시점검</a></li>
                            <li><a href="#">거래내역</a></li>
                            <li><a href="#">점검결과현황</a></li>
                            <li><a href="#">점검지원</a></li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <a href="#">심의관리</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="active">상시점검</a></li>
                            <li><a href="#">거래내역</a></li>
                            <li><a href="#">점검결과현황</a></li>
                            <li><a href="#">점검지원</a></li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <a href="#">운영총괄</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="active">상시점검</a></li>
                            <li><a href="#">거래내역</a></li>
                            <li><a href="#">점검결과현황</a></li>
                            <li><a href="#">점검지원</a></li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <a href="#">내부통제</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="active">상시점검</a></li>
                            <li><a href="#">거래내역</a></li>
                            <li><a href="#">점검결과현황</a></li>
                            <li><a href="#">점검지원</a></li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <a href="#">통합상시지원</a>
                        <ul class="sub-menu">
                            <li><a href="#" class="active">상시점검</a></li>
                            <li><a href="#">거래내역</a></li>
                            <li><a href="#">점검결과현황</a></li>
                            <li><a href="#">점검지원</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div class="btn-group">
                <button type="button">시스템관리</button>
                <button type="button" class="search">검색</button>
                <button type="button">홈</button>

                <div class="branch-info">
                    <div>
                        <p class="tit">부점정보조회</p>
                        <div class="mT10">
                            <label class="inline wp55">부점코드</label>
                            <input type="search" class="wp70">
                            <button type="button" class="btn btn-search">검색</button>
                            <input type="search" class="wp140" disabled>
                            <button type="button" class="btn">검색</button>
                        </div>
                    </div>

                    <div>
                        <p class="tit">직원정보조회</p>
                        <div class="mT10">
                            <label class="inline wp55">직원</label>
                            <input type="search" class="wp250">
                            <button type="button" class="btn">검색</button>
                        </div>
                    </div>

                    <div>
                        <p class="tit">화면조회</p>
                        <div class="mT10">
                            <label class="inline wp55">검색조건</label>
                            <div class="inline search-wrap">
                                <input type="search" class="wp298" placeholder="화면검색">
                                <button type="button" class="btn-search">검색</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </header>

        <section class="content-wrap">
            <aside class="lnb-bar" id="lnb">
                <div>
                    <button type="button" class="btn-toggle" id="lnbToggleBtn">메뉴 접기</button>

                    <div class="lnb-search">
                        <input type="search" id="searchInput" class="w100" placeholder="화면검색" autocomplete="off">
                        <button type="button" class="btn-search">검색</button>
                        <div class="search-result">
                            <ul>
                                <li><a href="#">권한 <strong>관리</strong></a></li>
                                <li><a href="#">보고서 <strong>관리</strong></a></li>
                                <li><a href="#">고객<strong>관리</strong>준칙 준수</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="tab-group">
                        <div class="lnb-tab mB10">
                            <button type="button" class="tab active" data-tab="menu1">메뉴</button>
                            <button type="button" class="tab" data-tab="menu2">마이메뉴</button>
                        </div>

                        <div class="lnb-tab-cont">
                            <div class="tab-cont active" id="menu1">
                                <ul class="lnb-menu">
                                    <li class="active">
                                        <a href="#">실시간 점검/익영업일 점검/...</a>
                                        <ul class="depth-4">
                                            <li class="active">
                                                <a href="#">실시간 점검/익영업일 점검 목록</a>
                                                <ul class="depth-5">
                                                    <li class="active">
                                                        <a href="#">5차메뉴1</a>
                                                    </li>
                                                    <li>
                                                        <a href="#">5차메뉴1</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <a href="#">실시간 점검/익영업일 점검 목록</a>
                                            </li>
                                        </ul>
                                    </li>

                                    <li>
                                        <a href="#">실시간 점검</a>
                                        <ul class="depth-4">
                                            <li>
                                                <a href="#">4차메뉴1</a>
                                                <ul class="depth-5">
                                                    <li>
                                                        <a href="#">5차메뉴1</a>
                                                    </li>
                                                    <li>
                                                        <a href="#">5차메뉴1</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <a href="#">4차메뉴2</a>
                                            </li>
                                        </ul>
                                    </li>

                                    <li>
                                        <a href="#">운영총괄</a>
                                        <ul class="depth-4">
                                            <li>
                                                <a href="#">4차메뉴1</a>
                                                <ul class="depth-5">
                                                    <li>
                                                        <a href="#">5차메뉴1</a>
                                                    </li>
                                                    <li>
                                                        <a href="#">5차메뉴1</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <a href="#">4차메뉴2</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#">내부통제</a>
                                    </li>
                                    <li><a href="#">통합상시지원</a></li>
                                    <li><a href="#">실시간 점검</a></li>
                                </ul>
                            </div>

                            <div class="tab-cont my-menu" id="menu2">
                                <p class="taR">
                                    <a href="#" class="btn-setting open-modal" data-modal="modal-mymenu">설정</a>
                                </p>
                                <ul class="lnb-menu">
                                    <li class="active">
                                        <a href="#">자주 사용하는 메뉴</a>
                                        <ul class="depth-4">
                                            <li class="active">
                                                <a href="#">AI 신용대출컨설팅</a>
                                                <button typ="button" class="btn-del">삭제</button>
                                            </li>
                                            <li>
                                                <a href="#">AI 전세자금컨설팅</a>
                                                <button typ="button" class="btn-del">삭제</button>
                                            </li>
                                            <li>
                                                <a href="#">AI (최초)기업신용평가</a>
                                                <button typ="button" class="btn-del">삭제</button>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#">임시폴더</a>
                                        <ul class="depth-4">
                                            <li>
                                                <a href="#">임시폴더 저장 메뉴</a>
                                                <button typ="button" class="btn-del">삭제</button>
                                            </li>
                                            <li>
                                                <a href="#">임시폴더 저장 메뉴</a>
                                                <button typ="button" class="btn-del">삭제</button>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#">마이메뉴 저장 메뉴</a>
                                        <button typ="button" class="btn-del">삭제</button>
                                    </li>
                                    <li>
                                        <a href="#">마이메뉴 저장 메뉴</a>
                                        <button typ="button" class="btn-del">삭제</button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="access-info">
                    경영정보개발부(0000) 홍길동(S000000)님<br>
                    IP : 00.0.00.000
                </div>

            </aside>

            <div class="content">
                <div class="tab-group">
                    <div class="cont-view-tab">
                        <div>
                            <ul>
                                <li class="tab fixed on" data-tab="menu3">
                                    <button type="button" class="btn-fix on"></button>
                                    <span>화면명_1화면명_1화면명_1</span> <!-- 고정 활성 -->
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab fixed" data-tab="menu4">
                                    <button type="button" class="btn-fix on"></button>
                                    <span>화면명_2화면명_2화면명_2</span> <!-- 고정 비활성 -->
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab on" data-tab="menu5">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_3화면명_3화면명_3</span> <!-- 비고정 활성 -->
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu6">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_4화면명_4화면명_4</span> <!-- 비고정 비활성 -->
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu7">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_5화면명_5화면명_5</span>
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu8">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_6화면명_6화면명_6</span>
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu9">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_7화면명_7화면명_7</span>
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu10">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_8화면명_8화면명_8</span>
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu11">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_9화면명_9화면명_9</span>
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu12">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_10화면명_10화면명_10</span>
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu13">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_11화면명_11화면명_11</span>
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                                <li class="tab" data-tab="menu14">
                                    <button type="button" class="btn-fix"></button>
                                    <span>화면명_12화면명_12화면명_12</span>
                                    <button type="button" class="btn-close small">닫기</button>
                                </li>
                            </ul>
                        </div>

                        <div class="ctrl-btns">
                            <button class="btn-prev">이전</button>
                            <button class="btn-next">다음</button>
                            <button class="btn-close-all">전체 탭 닫기</button>
                        </div>
                    </div>

                    <div class="tab-cont active" id="menu3">
                        <div>
                            <div class="tit-area bookmark">
                                <h2>
                                    <button type="button" class="btn-bookmark">즐겨찾기</button>
                                    <span class="txt-ellipsis">화면명_1화면명_1화면명_1화면명_1화면명_1화면명_1화면명_1화면명_1화면명_1화면명_1</span>
                                </h2>
                            </div>

                            <div class="breadcrumb">
                                <i>홈</i>
                                <ul class="breadcrumb-list">
                                    <li class="breadcrumb-item">
                                        <a href="#" class="breadcrumb-link" data-id="1">상시감사</a>
                                        <ul class="dropdown">
                                            <li><a href="#" data-content="상시감사">상시감사</a></li>
                                            <li><a href="#" data-content="상시감사 2">상시감사 2</a></li>
                                        </ul>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="#" class="breadcrumb-link" data-id="2">통합상시지원</a>
                                        <ul class="dropdown">
                                            <li><a href="#" data-content="통합상시지원">통합상시지원</a></li>
                                            <li><a href="#" data-content="통합상시지원 2">통합상시지원 2</a></li>
                                        </ul>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="#" class="breadcrumb-link" data-id="3">법규준수 시스템점검 결과</a>
                                        <ul class="dropdown">
                                            <li><a href="#" data-content="내부통제 등급 평가결과">내부통제 등급 평가결과</a></li>
                                            <li><a href="#" data-content="윤리경영 및 내부통제부문 평가결과">윤리경영 및 내부통제부문 평가결과</a></li>
                                            <li><a href="#" data-content="올바른 영업무화 및 법규준수 실태점검 결과">올바른 영업무화 및 법규준수 실태점검 결과</a></li>
                                        </ul>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="#" class="breadcrumb-link" data-id="4">4차메뉴</a>
                                        <ul class="dropdown">
                                            <li><a href="#" data-content="4차메뉴">4차메뉴</a></li>
                                            <li><a href="#" data-content="4차메뉴 4차메뉴 4차메뉴 4차메뉴">4차메뉴 4차메뉴 4차메뉴 4차메뉴</a></li>
                                        </ul>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="#" class="breadcrumb-link" data-id="5">5차메뉴</a>
                                        <ul class="dropdown">
                                            <li><a href="#" data-content="5차메뉴">5차메뉴</a></li>
                                            <li><a href="#" data-content="5차메뉴 5차메뉴 5차메뉴 5차메뉴">5차메뉴 5차메뉴 5차메뉴 5차메뉴</a></li>
                                        </ul>
                                    </li>
                                </ul>

                                <div class="tooltip"></div>
                            </div>
                        </div>

                        <div class="inner">
                            <div id="search-area">
                                <div>
                                    <div class="search-condition">
                                        <span>조회 기준</span>
                                        <div class="search-detail">
                                            <label class="ico-check inline" for="radio1">일별
                                                <input id="radio1" name="radio" type="radio" checked="checked">
                                                <span class="mark"></span>
                                            </label>
    
                                            <label class="ico-check inline" for="radio2">월별
                                                <input id="radio2" name="radio" type="radio">
                                                <span class="mark"></span>
                                            </label>
    
                                            <label class="ico-check inline" for="radio3">년도별
                                                <input id="radio3" name="radio" type="radio">
                                                <span class="mark"></span>
                                            </label>
                                        </div>
                                    </div>
    
                                    <div class="search-condition">
                                        <span>조회 기간</span>
                                        <div class="search-detail">
                                            <div class="inline">
                                                <input type="text" value="2025-01-01" class="wp110 hasDatepicker">
                                                <button type="button" class="ctrl-date">날짜 선택</button>
                                            </div>
                                            <span>~</span>
                                            <div class="inline">
                                                <input type="text" value="2025-01-31" class="wp110 hasDatepicker">
                                                <button type="button" class="ctrl-date">날짜 선택</button>
                                            </div>
                                        </div>
                                    </div>
    
                                    <div class="search-condition">
                                        <span>계좌 번호</span>
                                        <div class="search-detail">
                                            <input type="search" class="text-input" placeholder="숫자만 입력해주세요.">
                                        </div>
                                    </div>
                                </div>

                                <button type="button" class="btn ico-search">조회</button>
                            </div>

                            <div>grid</div>
                        </div>

                    </div>

                    <div class="tab-cont" id="menu4">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_2</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu5">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_3</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu6">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_4</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu7">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_5</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu8">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_6</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu9">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_7</h2>
                            </div>
                        </div>
                    </div>
                    <div class="tab-cont" id="menu10">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_8</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu11">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_9</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu12">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_10</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu13">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_11</h2>
                            </div>
                        </div>
                    </div>

                    <div class="tab-cont" id="menu14">
                        <div>
                            <div class="tit-area bookmark">
                                <h2><button type="button" class="btn-bookmark">즐겨찾기</button>화면명_12</h2>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </section>
    </div>

    <!-- modal -->
    <div class="modal" data-modal="modal-mymenu" data-width="700px">
        <div class="modal-content">
            <div class="modal-header">
                <h2>마이메뉴</h2>
                <button type="button" class="btn-close">닫기</button>
            </div>

            <div class="modal-body">
                <table class="tbl-view taC">
                    <caption>마이메뉴 추가</caption>
                    <tbody>
                        <tr>
                            <th class="w25">추가화면명</th>
                            <td class="taL">
                                <input type="search" class="w71">
                                <button class="btn ico-add-mymenu">마이메뉴 추가</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="ctrl-tree ty-1 mT15 mB10 taR">
                    <button type="button" id="refresh-tree">새로고침</button>
                    <button type="button" id="add-folder">폴더 추가</button>
                    <button type="button" id="delete-node">노드 삭제</button>
                    <button type="button" id="move-up" class="mL20">위로 이동</button>
                    <button type="button" id="move-down">아래로 이동</button>
                </div>
                <div class="tree-wrap ty-1">
                    <div id="jstree"></div>
                </div>
            </div>

            <div class="modal-footer taC">
                <button class="btn ico-apply">적용</button>
                <button class="btn lined cancel">취소</button>
            </div>
        </div>
    </div>
    <!--// modal -->

    <script>
        $(document).ready(function () {
            $("#jstree").jstree({
                "core": {
                    "themes": {
                        "icons": true,
                        "dots": false,
                        "lines": false
                    },
                    "data": [
                        { "id": "1", "parent": "#", "text": "마이메뉴", "type": "folder", "state": { "opened": true } },
                        { "id": "2", "parent": "1", "text": "서브 폴더 1", "type": "folder" },
                        { "id": "3", "parent": "1", "text": "서브 폴더 2", "type": "folder" },
                        { "id": "4", "parent": "2", "text": "메뉴 1", "type": "file" },
                        { "id": "5", "parent": "2", "text": "메뉴 2", "type": "file" },
                        { "id": "6", "parent": "3", "text": "메뉴 3", "type": "file" },
                        { "id": "7", "parent": "3", "text": "메뉴 4", "type": "file" },
                        { "id": "8", "parent": "1", "text": "메뉴 5", "type": "file" },
                        { "id": "9", "parent": "1", "text": "메뉴 6", "type": "file" }
                    ]
                },
                "types": {
                    "folder": {
                        "icon": "jstree-folder"
                    },
                    "file": {
                        "icon": "jstree-file"
                    }
                },
                "plugins": ["types"]
            });
            });
    </script>

    <script src="./js/menu.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 버튼 active 토글, 리셋 
            function toggleActive(selector, branchInfoSelector) {
                document.querySelectorAll(selector).forEach(element => {
                    element.addEventListener('click', function () {
                        this.classList.toggle('on');

                        // 부점정보 레이어
                        if (this.classList.contains('search')) {
                            const branchInfo = document.querySelector(branchInfoSelector);
                            if (this.classList.contains('on')) {
                                branchInfo.style.display = 'block';
                            } else {
                                branchInfo.style.display = 'none';
                            }
                        }
                    });
                });
            }
            toggleActive('.btn-bookmark');  /* 메뉴 즐겨찾기 */
            toggleActive('.btn-group .search', '.branch-info');  /* gnb 검색 */


            /*============*
              화면 검색
             *============*/
            const searchInput = document.getElementById("searchInput");
            const searchButton = document.querySelector(".lnb-search .btn-search");
            const searchResult = document.querySelector(".search-result");
            const searchItems = document.querySelectorAll(".search-result a");

            searchInput.addEventListener("input", function () {
                const searchText = searchInput.value;

                if (searchText.length > 0) {
                    searchButton.style.display = "none";
                    searchResult.style.display = "block";
                    searchInput.classList.add('active');
                } else {
                    searchButton.style.display = "block";
                    searchResult.style.display = "none";
                    searchInput.classList.remove('active');
                }
            });

            // 검색 결과 중 하나 선택 시 검색 결과 창 닫기
            searchItems.forEach(function (item) {
                item.addEventListener("click", function () {
                    searchResult.style.display = "none";
                    searchInput.value = "";
                    searchButton.style.display = "block";
                });
            });
            

            /*============*
              탭메뉴
            *============*/
            const tabGroups = document.querySelectorAll('.tab-group');

            tabGroups.forEach(group => {
                const spanTabs = group.querySelectorAll('.cont-view-tab li > span'); 
                const buttonTabs = group.querySelectorAll('button.tab'); 
                const contents = group.querySelectorAll('.tab-cont');

                // [고정-비고정 전용] : .cont-view-tab li > span 클릭 시 탭 전환
                spanTabs.forEach(span => {
                    span.addEventListener('click', function () {
                        const tab = this.parentElement;

                        spanTabs.forEach(t => t.parentElement.classList.remove('active'));
                        tab.classList.add('active');

                        contents.forEach(content => content.classList.remove('active'));

                        const tabId = tab.getAttribute('data-tab');
                        const targetContent = group.querySelector(`#${tabId}`);
                        if (targetContent) targetContent.classList.add('active');
                    });
                });

                // [고정-비고정 전용] : btn-fix 클릭 시 버튼 자체에만 on 클래스 토글
                group.querySelectorAll('.btn-fix').forEach(button => {
                    button.addEventListener('click', function () {
                        this.classList.toggle('on');
                    });
                });

                // [고정-비고정 전용] : btn-close 클릭 시 해당 탭과 콘텐츠 모두 닫기
                group.querySelectorAll('.btn-close').forEach(button => {
                    button.addEventListener('click', function () {
                        const tab = this.closest('li'); 
                        const tabId = tab.getAttribute('data-tab'); 
                        const targetContent = group.querySelector(`#${tabId}`);

                        tab.style.display = 'none';
                        if (targetContent) {
                            targetContent.style.display = 'none';
                        }
                    });
                });

                // 일반 탭 메뉴 : button.tab 클릭 시 탭 전환
                buttonTabs.forEach(button => {
                    button.addEventListener('click', function () {
                        const tab = this;  
                        const tabId = tab.getAttribute('data-tab');

                        buttonTabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');

                        contents.forEach(content => content.classList.remove('active'));

                        // 클릭한 탭에 해당하는 콘텐츠 보이기
                        const targetContent = group.querySelector(`#${tabId}`);
                        if (targetContent) targetContent.classList.add('active');
                    });
                });
            });

            /*======================*
            고정/비고정 탭메뉴 컨트롤
            *======================*/
            let tabIndex = 0;
            const tabContainer = document.querySelector('.cont-view-tab ul');
            const prevBtn = document.querySelector('.ctrl-btns .btn-prev');
            const nextBtn = document.querySelector('.ctrl-btns .btn-next');
            const closeAllBtn = document.querySelector('.ctrl-btns .btn-close-all');
            const tabContainerWrapper = document.querySelector('.cont-view-tab > div');
            const ctrlBtns = document.querySelector('.cont-view-tab .ctrl-btns');

            const tabWidth = 167; // 개별 탭 너비 + 여백
            let totalTabs = document.querySelectorAll('.cont-view-tab .tab').length;
            let maxIndex = Math.max(0, totalTabs - Math.floor(tabContainerWrapper.offsetWidth / tabWidth));

            function updateButtons() {
                totalTabs = document.querySelectorAll('.cont-view-tab .tab').length;
                maxIndex = Math.max(0, totalTabs - Math.floor(tabContainerWrapper.offsetWidth / tabWidth));
                let totalTabsWidth = totalTabs * tabWidth;

                // 컨트롤 버튼 (너비 이하면 숨김)
                if (totalTabsWidth > tabContainerWrapper.offsetWidth) {
                    ctrlBtns.style.display = 'flex';
                } else {
                    ctrlBtns.style.display = 'none';
                }

                prevBtn.disabled = tabIndex === 0;
                nextBtn.disabled = tabIndex >= maxIndex;
            }

            prevBtn.addEventListener('click', function() {
                if (tabIndex > 0) {
                    tabIndex--;
                    tabContainer.style.transform = `translateX(${-tabIndex * tabWidth}px)`;
                }
                updateButtons();
            });

            nextBtn.addEventListener('click', function() {
                if (tabIndex < maxIndex) {
                    tabIndex++;
                    tabContainer.style.transform = `translateX(${-tabIndex * tabWidth}px)`;
                }
                updateButtons();
            });

            document.querySelectorAll('.cont-view-tab .btn-close.small').forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.cont-view-tab .tab').remove();
                    updateButtons();
                });
            });

            closeAllBtn.addEventListener('click', function() {
                document.querySelectorAll('.cont-view-tab .tab').forEach(tab => tab.remove());
                tabIndex = 0;
                tabContainer.style.transform = `translateX(0px)`;
                updateButtons();
            });

            const observer = new MutationObserver(() => {
                updateButtons();
            });

            observer.observe(tabContainer, {
                childList: true,
                subtree: true,
            });

            window.addEventListener('resize', updateButtons);
            updateButtons();

            /*============*
              breadcrumb
             *============*/
            // 메뉴를 클릭할 때 breadcrumb-link 텍스트 업데이트하고, 드롭다운을 닫는 함수
            function updateBreadcrumb(event) {
                const newContent = event.target.getAttribute('data-content');
                const parentItem = event.target.closest('.breadcrumb-item');
                const breadcrumbLink = parentItem.querySelector('.breadcrumb-link');
                breadcrumbLink.textContent = newContent; // breadcrumb-link에 선택한 메뉴명 표시

                // 툴팁에 선택한 메뉴명 표시
                const tooltip = document.querySelector('.tooltip');
                tooltip.textContent = newContent;

                // 드롭다운 숨기기
                const dropdown = parentItem.querySelector('.dropdown');
                dropdown.style.display = 'none';
            }

            // 드롭다운 항목 클릭 시 메뉴 업데이트
            document.querySelectorAll('.dropdown li a').forEach(function (item) {
                item.addEventListener('click', updateBreadcrumb);
            });

            // 메뉴를 클릭했을 때 드롭다운 토글
            document.querySelectorAll('.breadcrumb-link').forEach(function (link) {
                link.addEventListener('click', function (event) {
                    // 모든 드롭다운을 숨김
                    document.querySelectorAll('.dropdown').forEach(function (dropdown) {
                        if (dropdown !== link.nextElementSibling) {
                            dropdown.style.display = 'none';
                        }
                    });

                    // 클릭한 드롭다운 토글
                    const dropdown = link.nextElementSibling;
                    dropdown.style.display = (dropdown.style.display === 'block') ? 'none' : 'block';

                    event.preventDefault();
                });
            });

            // breadcrumb-link에 마우스를 올렸을 때 툴팁 표시
            document.querySelectorAll('.breadcrumb-item').forEach(function (item) {
                item.addEventListener('mouseover', function () {
                    const breadcrumbLink = item.querySelector('.breadcrumb-link');
                    // 메뉴명이 넘쳐서 말줄임 처리된 경우 툴팁 표시
                    if (breadcrumbLink.offsetWidth < breadcrumbLink.scrollWidth) {
                        const tooltip = document.querySelector('.tooltip');
                        tooltip.style.visibility = 'visible';
                        tooltip.style.opacity = 1;

                        // 툴팁 위치를 breadcrumb-link에 맞게 설정
                        const linkRect = breadcrumbLink.getBoundingClientRect();
                        tooltip.style.left = `${linkRect.left + window.scrollX - breadcrumbLink.offsetWidth - tooltip.offsetWidth / 2}px`;
                        tooltip.style.top = `${linkRect.top + window.scrollY - 70}px`;

                        tooltip.textContent = breadcrumbLink.textContent;
                    }
                });

                // 마우스가 벗어나면 툴팁 숨김
                item.addEventListener('mouseout', function () {
                    const tooltip = document.querySelector('.tooltip');
                    tooltip.style.visibility = 'hidden';
                    tooltip.style.opacity = 0;
                });
            });

            /*============*
              modal
             *============*/
            document.querySelectorAll('.open-modal').forEach(trigger => {
                trigger.addEventListener('click', event => {
                    event.preventDefault();
                    const modalId = trigger.getAttribute('data-modal');
                    const modal = document.querySelector(`.modal[data-modal="${modalId}"]`);
                    if (modal) {
                        // data-width 속성이 있을 경우, 모달 콘텐츠의 최대 너비를 설정
                        const widthValue = modal.getAttribute('data-width');
                        const modalContent = modal.querySelector('.modal-content');
                        if (widthValue && modalContent) {
                            modalContent.style.maxWidth = widthValue;
                        }
                        modal.style.display = 'block';
                    }

                });
            });

            // 각 모달 내의 닫기, 취소, 적용 버튼 및 배경 클릭 이벤트 처리
            document.querySelectorAll('.modal').forEach(modal => {
                modal.querySelector('.btn-close').addEventListener('click', () => {
                    modal.style.display = 'none';
                });
                modal.querySelector('.cancel').addEventListener('click', () => {
                    modal.style.display = 'none';
                });
                modal.querySelector('.ico-apply').addEventListener('click', () => {
                    alert('적용 버튼이 클릭되었습니다!');
                    modal.style.display = 'none';
                });
                // 모달 배경 클릭 시 모달 닫기
                modal.addEventListener('click', event => {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            });
        });
    </script>
</body>

</html>